# Dataset Collector for Raspberry Pi

A web-based interface for capturing and managing datasets using Raspberry Pi cameras (and USB cameras). This tool allows you to control multiple cameras, view live feeds, and trigger captures via a web UI or MQTT.

## Features

-   **Multi-Camera Support**: Automatically detects and controls Raspberry Pi cameras and USB webcams.
-   **Live Preview**: View low-latency video feeds from all connected cameras.
-   **Web Interface**:
    -   **Grid View**: Monitor all cameras simultaneously.
    -   **Single Camera View**: Focus on one camera with fine-grained controls.
    -   **Config Editor**: Edit camera configurations (YAML) and MQTT settings directly from the browser.
    -   **Activity Log**: Real-time logging of MQTT events and system activities.
    -   **Gallery**: Browse and manage captured images.
    -   **Manual Focus**: Fine-tune focus using a slider (for supported cameras).
-   **MQTT Integration**: Trigger captures remotely via MQTT (supports hot-reloading context).
-   **File Management**: Organize captures into custom directories.

## Prerequisites

-   **Hardware**: Raspberry Pi (tested on Pi 5/Zero 2 W) with Raspberry Pi OS (Bookworm or later recommended due to `libcamera` dependencies).
-   **Software**: Python 3.11+, `libcamera`, `picamera2` (usually pre-installed on RPi OS).

## Installation

    ```bash
    git clone https://github.com/yourusername/dataset-collector.git
    cd dataset-collector
    **Option A: For Raspberry Pi Zero 2 W (Lite Version)**
    Recommended for low-power devices. Enables swap memory and sets 720p resolution.
    ```bash
    chmod +x setup_lite.sh
    ./setup_lite.sh
    ```

    **Option B: For Raspberry Pi 4 / 5 (Pro Version)**
    Recommended for powerful devices. Skips swap setup and sets 1080p resolution.
    ```bash
    chmod +x setup_pro.sh
    ./setup_pro.sh
    ```

2.  **Run the Application:**
    The script prepares the environment for you. To run the app:
    ```bash
    source venv/bin/activate
    python3 main.py
    ```

3.  **Access the Web Interface:**
    Open your browser and navigate to `http://<your-pi-ip>:8000`.

## Configuration

### Camera Configuration
The application uses a `camera_config.yaml` file to store camera settings. This file is automatically generated if it doesn't exist. You can edit it via the **Editor** page in the web UI.

### MQTT Configuration
MQTT settings (Broker, Port, Topic, Auth) can be configured in the **Editor** page.
-   **Status Topic**: `dataset_collector/status` (Publishes "online"/"offline")
-   **Trigger Topic**: Configurable (Default: `capture/trigger`)

## Usage

1.  Open your browser and navigate to `http://<your-pi-ip>:8000`.
2.  Use the **Dashboard** to see live views.
3.  Click the **Capture** button (or press Spacebar) to take photos.
4.  Use the **Explorer** to create folders and organize your dataset.

## License

[MIT License](LICENSE)
